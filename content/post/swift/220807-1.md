---
title: "COW(Copy-On-Write)"
date: 2022-08-07T17:06:10+08:00

categories:
  - Dev
  -  #Review

tags:
  - swift
  - COW

image: https://res.cloudinary.com/dwrejmale/image/upload/v1658929900/swift_dpaoqx.png #the-creative-exchange-d2zvqp3fpro-unsplash.jpg
---

## COW ğŸ‚ â“

COW(Copy On Write)ëŠ” Swiftì—ì„œ ì„±ëŠ¥í–¥ìƒì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì´ë‹¤.

> Swiftì—ì„œ Array ë³µì‚¬ë¥¼ í•  ë•Œ ì‹¤ì œë¡œ ê°’ì„ ë³µì‚¬í•˜ì§€ ì•Šê³  ì›ë³¸ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•˜ë‹¤ê°€
> ì›ë³¸ì´ë‚˜ ë³µì‚¬ë³¸ì— ìˆ˜ì •ì´ ì¼ì–´ë‚˜ëŠ” ê²½ìš° ê·¸ ë•Œ ë³µì‚¬ê°€ ì´ë£¨ì–´ì§€ë„ë¡ í•˜ëŠ” ê²ƒì„ COW ë¼ê³  í•œë‹¤.

ì£¼ì†Œê°’ì„ í”„ë¦°íŠ¸í•˜ëŠ” `address()`í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  array1 ë°°ì—´ì„ ë³µì‚¬í•˜ì—¬ array2ì— í• ë‹¹í•˜ê³  ì£¼ì†Œë¥¼ ì°ì–´ë³´ë©´ ë™ì¼í•œ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

array2ì— ìˆ«ìë¥¼ ì¶”ê°€í•˜ê³  ì£¼ì†Œë¥¼ ì°ì–´ë³´ë©´ array2ì˜ ì£¼ì†Œê°€ ë³€ê²½ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

```swift
func address(of: UnsafeRawPointer) {
    let address = String(format: "%p", Int(bitPattern: of))
    print(address)
}

var array1 = [1,2,3,4]
var array2 = array1

address(of: array1) // 0x60000231a5e0
address(of: array2) // 0x60000231a5e0

//change array 2
array2.append(7)
address(of: array1) // 0x60000231a5e0
address(of: array2) // 0x6000019ecb60
```

ë³µì‚¬í•œ ë‚´ìš©ì´ ë™ì¼í•˜ë‹¤ë©´ ë©”ëª¨ë¦¬ë¥¼ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì°¸ì¡°í•¨ìœ¼ë¡œì¨ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ë°©ì§€í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì„±ëŠ¥í–¥ìƒì„ í•  ìˆ˜ ìˆë‹¤.

ë¬¼ë¡  ì²«ë²ˆì§¸ ìˆ˜ì •ì´ ì´ë£¨ì–´ì§€ëŠ” ì‹œì ì— ê°’ì„ ë³µì‚¬í•˜ê¸° ë•Œë¬¸ì— ì‹œê°„ì´ ì¡°ê¸ˆ ë” ê±¸ë¦´ ìˆ˜ ìˆì§€ë§Œ, ë™ì¼í•œ ë‚´ìš©ì˜ ê²½ìš° ë³µì‚¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì†ë„ë‚˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ìƒëŠ” ê²ƒë³´ë‹¤ ì–»ëŠ” ê²ƒì´ ë§ë‹¤ê³  í•´ì•¼ í• ê¹Œ..

## Reference

https://medium.com/@lucianoalmeida1/understanding-swift-copy-on-write-mechanisms-52ac31d68f2f

https://ishtiz.com/swift/what-is-copy-on-writecow-in-swift

https://babbab2.tistory.com/18
