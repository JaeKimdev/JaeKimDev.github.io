---
title: "Singleton Pattern"
date: 2022-08-28T14:34:00+08:00

categories:
  - Dev
  -  #Review

tags:
  - swift
  - singleton
  -  #book

image: https://res.cloudinary.com/dwrejmale/image/upload/v1658929900/swift_dpaoqx.png #the-creative-exchange-d2zvqp3fpro-unsplash.jpg
---

## Singleton

### Singletonì´ë€?

> **Singleton** = Only one instance Available (í•œë²ˆë§Œ ë§Œë“¤ì–´ì„œ ì“´ë‹¤! ì •ë„ë„ê¹Œ?)

íŠ¹ì • ìš©ë„ë¡œ ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•˜ë„ë¡ ë³´ì¥í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´

![img](post/swift/220928-1.png)
`GangOfFourì˜ ë””ìì¸ íŒ¨í„´`ì—ì„œ ì´ì•¼ê¸°í•˜ê³  ìˆëŠ” ì—¬ëŸ¬ê°€ì§€ ë””ìì¸ íŒ¨í„´ ì¤‘ `ìƒì„± - Singleton`ì˜ UML ë‹¤ì´ì–´ê·¸ë¨ì´ë‹¤.

![img](post/swift/220928-2.png)

ì• í”Œ ë¬¸ì„œì˜ ê·¸ë¦¼ì„ ë³´ë©´

- ì¼ë°˜ì ì¸ ClassëŠ” ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí•˜ì—¬ ì›í•˜ëŠ” ê°¯ìˆ˜ë§Œí¼ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ,
- ì‹±ê¸€í†¤ í´ë˜ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìš”ì²­í•œ íšŸìˆ˜ì™€ ìƒê´€ì—†ì´ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
- ì‹±ê¸€í†¤ ê°œì²´ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì „ì—­ ì•¡ì„¸ìŠ¤ ì§€ì ì„ ì œê³µ(Global available) â¡ï¸ ë‹¨ì ìœ¼ë¡œëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆê² ë‹¤.

`Cocoa framework`ì—ì„œ UIKitì˜ `NSFileManager`, `NSWorkspace`,  
`UIKit`ì—ì„œ `UIApplication`ë° `UIAccelerometer`ê°€ ì‹±ê¸€í†¤ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤ê³  í•œë‹¤.

ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” íŒ©í† ë¦¬ ë©”ì„œë“œì˜ ì´ë¦„ì€ ê·œì¹™ì— ë”°ë¼ `Shared` + `Class Type` í˜•ì‹  
â¡ï¸ Cocoa í”„ë ˆì„ì›Œí¬ì˜ ì˜ˆ `sharedFileManager`, `sharedColorPanel`, `sharedWorkspace`

### ğŸŒ± ì‹±ê¸€í†¤ ì‚¬ìš© ì˜ˆ

```swift
  let UserDefaults = UserDefaults.standard
  let fileManager = FileManager.default
  let urlSession = URLSession.shared
  let application = UIApplication.shared
  let notification = NotificationCenter.default
```

### ì‹±ê¸€í†¤ ì¥/ë‹¨ì 

|ì¥ì | âœ… í•œê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ìƒì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŒ  âœ… Singleton InstanceëŠ” ì „ì—­ Instanceë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë“¤ê³¼ ìì› ê³µìœ ê°€ ì‰¬ì›€  âœ… ì¸ìŠ¤í„´ìŠ¤ê°€ 1ê°œë¼ëŠ” ê²ƒì„ ë³´ì¦ë°›ëŠ”ë‹¤ (Thread Safe)|
| :--: | :-- |
|ë‹¨ì | âœ… ì¸ìŠ¤í„´ìŠ¤ê°€ ë„ˆë¬´ ë§ì€ ì¼ì„ í•˜ê±°ë‚˜, ë§ì€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ë©´ Instanceë“¤ ê°„ ê²°í•©ë„ê°€ ë†’ì•„ì ¸ `ê°œë°©-íì‡„ ì›ì¹™(OCP, Open-Closed Principle)`ì„ ìœ„ë°°í•  ìˆ˜ ìˆìŒ(ì˜ì¡´ì„±ì„ ë§Œë“¤ì–´ ë‚¸ë‹¤)  â¡ï¸ Unit í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›Œ ì§ˆ ìˆ˜ ìˆìŒ|

### Shared Class Type

`static`ì„ ì‚¬ìš©í•˜ì—¬ ì‹±ê¸€í†¤ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤

```swift
  class Singleton {
  	 static let shared = Singleton()
  }
```

ì´ˆê¸°í™” ì´ì™¸ì˜ ì¶”ê°€ ì„¤ì •ì„ í•´ì•¼ í•˜ëŠ” ê²½ìš°, í´ë¡œì € í˜¸ì¶œ ê²°ê³¼ë¥¼ ì „ì—­ ìƒìˆ˜ì— í• ë‹¹í•  ìˆ˜ ìˆë‹¤.

```swift
class Singleton {
    static let shared: Singleton = {
        let instance = Singleton()
        // setup code
        return instance
    }()
}
```

âœ… `ochococo` ê¹ƒí—ˆë¸Œì— ì˜¬ë¼ì™€ ìˆëŠ” swift ì‹±ê¸€í†¤ ì˜ˆì œ

```swift
final class ElonMusk {

    static let shared = ElonMusk()

    private init() {}
        // Private initialization to ensure just one instance is created.
}

let elon = ElonMusk.shared // There is only one Elon Musk folks.
```

## Reference

[Apple - Singleton](https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html)  
[Managing a Shared Resource Using a Singleton](https://developer.apple.com/documentation/swift/cocoa_design_patterns/managing_a_shared_resource_using_a_singleton)  
[Learn iOS Singletons](https://www.youtube.com/watch?v=hs0tGkPdSQM)  
[Design-Patterns-In-Swift - Singleton](https://github.com/ochococo/Design-Patterns-In-Swift#-singleton)  
[ì†Œë“¤ì´ ë¸”ë¡œê·¸ - ì‹±ê¸€í†¤ íŒ¨í„´](https://babbab2.tistory.com/66)
